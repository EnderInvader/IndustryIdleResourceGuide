<!--Source Code from https://hanns.io/pi-->
<title>Industry Idle Resource Guide</title>
<style type="text/css" media="screen">
	body { background-color: #000; }
	body,td { font: .8em Gotham, Helvetica Neue, Helvetica, Arial Narrow, Arial; font-weight: 500; color: #666; padding: 0; margin: 0; }
	ul { list-style: none none; margin: 0; padding: 0; display: block; }
	
	a,a:link { color: #ffcc00; text-decoration: none; }
	
	td { padding: 4px 4px; text-align: center; border: 1px solid #111; border-width: 1px 0; }
	tr:last-child td { border-bottom-width: 0; }
	tr.header td { padding: 10px 4px; font-size: 1.5em; font-weight: 200; color: #aaa; }
	tr.header td i { font-size: .4em; font-weight: 200; font-style: normal; }

	.items li { margin: 5px 0px; }
	.items li.current span { text-shadow: 0px 0px 8px #79cef4; }
	.arrows li { margin: 5px 0px; color: #ff5454; }
	.items li span { white-space: nowrap; cursor: pointer; background-color: rgba(0,0,0,0.75); border-radius: 3px; padding: 1px 4px; }
	
	tr.footer { display: none; }
/*
	tr.footer td { color: #111; }
	.p1 td,.p2 td,.p3 td,.p4 td,
	.p1,.p2,.p3,.p4 { font-weight: 900 !important; }
	.p1.current,.p2.current,.p3.current,.p4.current,
	.p1.current td,.p2.current td,.p3.current td,.p4.current td { color: red; }
*/
	#canvas { z-index: 1; display: block; position: absolute; left: 0; top: 0; background-color: transparent; }
	#pi { z-index: 2; border-collapse: collapse; position: relative; left: 0; top: 0; }

</style>
<body>
<table id="pi" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr class="header">
<td valign="top">Maps</td>
<td valign="top" colspan="3">Resources</td>
<td valign="top"></td>
<td valign="top" colspan="3">T1 Factories<br></td>
<td valign="top"></td>
<td valign="top" colspan="3">T1 Resources<br></td>
<td valign="top"></td>
<td valign="top" colspan="3">T2 Factories<br></td>
<td valign="top"></td>
<td valign="top" colspan="3">T2 Resources<br></td>
<td valign="top"></td>
<td valign="top" colspan="3">Special<br></td>
</tr>
<tr>
<td class="items">
<ul id="maps">
<li>Stockholm</li>
<li>Oslo</li>
<li>St Petersburg</li>
<li>Rotterdam</li>
<li>Detroit</li>
<li>Toulouse</li>
<li>Rome</li>
<li>Hamburg</li>
<li>Boston</li>
</ul>
</td>
<td colspan="3" class="items">
<ul id="resources">
<li class="stockholm oslo st-petersburg rotterdam detroit toulouse rome hamburg boston">Iron</li>
<li class="stockholm oslo st-petersburg toulouse hamburg boston">Oil</li>
<li class="stockholm oslo st-petersburg rotterdam detroit toulouse rome hamburg boston">Coal</li>
<li class="stockholm oslo st-petersburg rotterdam detroit toulouse rome hamburg boston">Aluminum</li>
<li class="stockholm hamburg">Copper</li>
<li class="stockholm oslo st-petersburg rotterdam detroit toulouse rome hamburg boston">Silicon</li>
<li class="rotterdam rome">Chromium</li>
<li class="detroit toulouse rome boston">Titainium</li>
<li class="st-petersburg toulouse">Uranium</li>
<li class="oslo rotterdam detroit rome boston">Gas</li>
<li class="detroit hamburg">Lithium</li>
<li class="stockholm oslo st-petersburg rotterdam detroit toulouse rome hamburg boston">Wood</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items">
<ul id="tf1">
<li class="wood">Lumber Mill</li>
<li class="wood">Paper Mill</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items">
<ul id="tr1">
<li class="lumber-mill">Lumber</li>
<li class="paper-mill">Paper</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items">
<ul id="tf2">
<li class="paper">Book Publisher</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items">
<ul id="tr2">
<li class="book-publisher">Book</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items">
<ul id="sp1">
<li class="book-publisher">Science</li>
<li class="paper-mill">Culture</li>
</ul>
</td>
<td class="items"></td>
<td colspan="3" class="items">
<ul id="sp2">
<li class="science">Research Points</li>
<li class="culture">Policy Points</li>
</ul>
</td>
</tr>
<tr class="p1 footer">
<td></td>
<td></td>
<td>3000<i>u</i></td>
<td></td>
<td>&rarr;</td>
<td></td>
<td>20<i>u</i></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="p2 footer">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>40<i>u</i></td>
<td></td>
<td>&rarr;</td>
<td></td>
<td>5<i>u</i></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="p3 footer">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>10<i>u</i></td>
<td></td>
<td>&rarr;</td>
<td></td>
<td>3<i>u</i></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="p4 footer">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>40<i>u</i></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>6<i>u</i></td>
<td></td>
<td>&rarr;</td>
<td></td>
<td>1<i>u</i></td>
<td></td>
</tr>
<tr>
<td style="width: 8%;">&nbsp;</td>
<td style="width: 12%;">&nbsp;</td>
<td style="width: 4%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 4%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 1%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
<td style="width: 4%;">&nbsp;</td>
<td style="width: 7%;">&nbsp;</td>
</tr>
</table>
<canvas id="canvas"></canvas>
<div style="position: fixed; bottom: 0; text-align: center; width: 100%;">
</div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script>
$(document).ready(function() {
	
	var colors = ["#333","#492f1f","#763c19","#f7941d","yellow","#79cef4","#00aeef","lime","green","#304b15"];
	$(".items li").css({color:colors[0]});
	
	canvas();
	$(window).resize(function() { // todo: get event, only repaint on mouse release
		canvas();
	});

	// distribute before list to span
	$(".items ul li")
		.wrapInner($('<span />'))
		.each(function() {

			item = lower_case($(this).children("span").html());		// turn item name css compliant
			$(this).attr({ id: item });								// set li id as item name
			
			if ($(this).parents("ul").attr("id") != "maps") {		// maps has no before
				list = $(this).attr("class").split(/\s+/);			// get before items from li class
				for (i in list) {
					$("#"+list[i]+" span").addClass(item);			// find id with class, inject itself into span as class
				}
			}
		})
	$('.items')
		.on('mouseenter','ul li',function() {
			if (! $('#pi').hasClass('sticky')) {
				$(this).addClass("current");
				$(this).css({color:colors[5]});
				pi_link($(this));
			}
		})
		.on('mouseleave','ul li',function() {
			if (! $('#pi').hasClass('sticky')) {
				$(this).removeClass("current");
				$(".items li").css({color:colors[0]});
				canvas();
			}
		})
		.on('click','ul li',function() {
			
			if (!$(this).hasClass('current')) {
				$('#pi').removeClass('sticky')
			}
			
			if ($('#pi').hasClass('sticky')) {
				$('#pi').removeClass('sticky')
				
				$('.items li').removeClass('current').css({color:colors[0]});
			} else {
				$('#pi').addClass('sticky')
				
				$('.items li').removeClass('current').css({color:colors[0]});
				canvas();

				$(this).addClass("current");
				$(this).css({color:colors[5]});
				pi_link($(this));
			}
		})
		
		// $("ul#tr1").hover(function() { $(".p1").toggleClass("current"); });
		// $("ul#tr2").hover(function() { $(".p2").toggleClass("current"); });
		// $("ul#tr3").hover(function() { $(".p3").toggleClass("current"); });
		// $("ul#tr4").hover(function() { $(".p4").toggleClass("current"); });
	
	function lower_case(s) { return s.toLowerCase().replace(/ /g, '-').replace(/\./g, ''); }
	function pi_link(item) {
		pi_link_before(item,-1);
		pi_link_after(item,1);
	}
	function pi_link_before(item, degree, depth) {
		type   = item.parent("ul").attr("id");

		class_prefex = ".items li span.";
		$(".items li span."+item.attr("id"))
			.each(function() {
				$(this).parent("li").css({color: colors[5+degree]});
				if (degree > -4) {
					line(item.children("span"),$(this),colors[5+degree],colors[5+degree+1]);
				}
				pi_link_before($(this).parent("li"),degree-1);
			});
	}
	function pi_link_after(item, degree, depth) {
		type   = item.parent("ul").attr("id");
		
		$(".items li."+item.attr("id"))
			.each(function() {
				$(this).css({color: colors[5+degree]});
				if (degree < 3) {
					line($(this).children("span"),item.children("span"),colors[5+degree-1],colors[5+degree]);
				}
				pi_link_after($(this),degree+1);
			});
	}
	
	$("#disco").toggle(
		function() {
			$(this).text("Disco!");
		}
	,
		function() {
			$(this).text("Planets");
		}
	);
});
function canvas() {
	$("#canvas").attr({ 
		"height": $("#pi").outerHeight(),
		"width": $("#pi").outerWidth() 
	});
}
function line(a,b,c1,c2) {
	pad = 0;
	fx  = a.position().left + 4;
	fy  = a.position().top + a.height()/2 + 1;
	tx  = b.position().left + b.width() + 2;
	ty  = b.position().top + b.height()/2 + 1;

	var cvs = document.getElementById('canvas');

	var ctx = cvs.getContext('2d');
	ctx.lineWidth = 1;
	ctx.beginPath();
	ctx.moveTo(tx,ty);
	ctx.lineTo(fx,fy);
	ctx.globalAlpha = 0.5;

	var gdt = ctx.createLinearGradient( tx,ty, fx,fy );
	gdt.addColorStop(0, c1);
	gdt.addColorStop(1, c2);

	ctx.strokeStyle = gdt;
	ctx.stroke();
}


pi = {
	maps: ['Stockholm','Oslo','St. Petersburg','Rotterdam','Detroit','Toulouse','Rome','Hamburg','Boston'],
	resources: ['Iron','Oil','Coal','Aluminum','Copper','Silicon','Chromium','Titanium','Uranium','Gas','Lithium','Wood'],
	productions: {
		tr1: ['Lumber','Paper'],
		tr2: ['Book'],
		tr3: [],
		tr4: []
	},
	factories: {
		tf1: ['Lumber Mill', 'Paper Mill'],
		tf2: ['Book Publisher'],
		tf3: [],
		tf4: []
	},
	special: {
		sp1: ['Science','Culture'],
		sp2: ['ResearchPoints','PolicyPoints']
	}
}
</script>